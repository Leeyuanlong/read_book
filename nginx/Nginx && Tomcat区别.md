# ginx和tomcat的区别
 
   web上的server都叫web server，但是大家分工也有不同的。
 
   nginx常用做静态内容服务和代理服务器（不是你翻墙那个代理），直面外来请求转发给后面的应用服务（tomcat，django什么的），tomcat更多用来做
 一个应用容器，让java web app跑在里面的东西，对应同级别的有jboss,jetty等东西。
 
   但是事无绝对，nginx也可以通过模块开发来提供应用功能，tomcat也可以直接提供http服务，通常用在内网和不需要流控等小型服务的场景。
 
   apache用的越来越少了，大体上和nginx功能重合的更多。
  
   严格的来说，Apache/Nginx 应该叫做「HTTP Server」；而Tomcat则是Application Server，或者更准确的来说，是一个Servlet/JSP应用的容器
 （Ruby/Python 等其他语言开发的应用也无法直接运行在 Tomcat 上）。
 
   一个 HTTP Server 关心的是 HTTP 协议层面的传输和访问控制，所以在 Apache/Nginx 上你可以看到代理、负载均衡等功能。客户端通过 HTTP Server 
 访问服务器上存储的资源（HTML 文件、图片文件等等）。通过 CGI 技术，也可以将处理过的内容通过 HTTP Server 分发，但是一个 HTTP Server 始终
 只是把服务器上的文件如实的通过 HTTP 协议传输给客户端。
 
   而应用服务器，则是一个应用执行的容器。它首先需要支持开发语言的Runtim（对于 Tomcat 来说，就是 Java），保证应用能够在应用服务器上正常运
 行。其次，需要支持应用相关的规范，例如类库、安全方面的特性。对于Tomcat来说，就是需要提供 JSP/Sevlet 运行需要的标准类库、Interface等。
 为了方便，应用服务器往往也会集成 HTTP Server 的功能，但是不如专业的HTTP Server那么强大，所以应用服务器往往是运行在HTTP Server的
 背后，执行应用，将动态的内容转化为静态的内容之后，通过HTTP Server分发到客户端。
 
 # Nginx能做什么
 
 - 反向代理
 - 负载均衡
 - HTTP服务器（动静分离）
 - 正向代理
 
 ## 反向代理

   反向代理应该是Nginx做的最多的一件事了。
   反向代理（Reverse Proxy）方式是指以代理服务器来接受internet上的连接请求，然后将请求转发给内部网络上的服务器，并将从服务器上得到的结果
   返回给internet上请求连接的客户端，此时代理服务器对外就表现为一个反向代理服务器。简单来说就是真实的服务器不能直接被外部网络访问，所以需要
   一台代理服务器，而代理服务器能被外部网络访问的同时又跟真实服务器在同一个网络环境，当然也可能是同一台服务器，端口不同而已。
    
    正向代理和反向代理的区别：
    1、正向代理：类似我们想要访问国外的Google服务器，但是由于访问限制，我们需要找一个代理去访问。换句话说，客户端明确知道要访问的服务器的地
    址，客户端把请求发送给代理，代理转发给服务器，服务器把响应传给代理，最后代理把响应传给客户端。我们可以看到客户端知道服务器是谁，但是服务
    器并不知道客户端是谁，这就是正向代理，隐藏了客户端的真实信息。2、反向代理：类似我们访问淘宝，由于访问量巨大，淘宝会使用许多台服务器（就是
    分布式服务器）来支持，但是每个客户端的请求到底由哪一台服务器来响应，我们需要一个代理来决定。换句话说，客户端并不知道要把请求发送给哪一台
    服务器，但是知道发送给哪一个代理，然后代理依据规则（响应时间，负载均衡等）决定把请求转发给哪一台服务器。可以看到，客户端并不知道他访问的
    服务器是谁，这就是反向代理，隐藏了服务器的真实信息。
   

## 负载均衡

   负载均衡也是Nginx常用的一个功能，负载均衡其意思就是分摊到多个操作单元上进行执行，例如Web服务器、FTP服务器、企业关键应用服务器和其它关键
   任务服务器等，从而共同完成工作任务。简单而言就是当有2台或以上服务器时，根据规则随机的将请求分发到指定的服务器上处理，负载均衡配置一般都需
   要同时配置反向代理，通过反向代理跳转到负载均衡。而Nginx目前支持自带3种负载均衡策略，还有2种常用的第三方策略。

   - RR：每个请求按时间顺序逐一分配到不同的后端服务器，如果后端服务器down掉，能自动剔除。
   - 权重：指定轮询几率，weight和访问比率成正比，用于后端服务器性能不均的情况。
   - IP_HASH：iphash的每个请求按访问ip的hash结果分配，这样每个访客固定访问一个后端服务器，可以解决session的问题。
   - FAIR：按后端服务器的响应时间来分配请求，响应时间短的优先分配。
   - URL_HASH：按访问url的hash结果来分配请求，使每个url定向到同一个后端服务器，后端服务器为缓存时比较有效。


## HTTP服务器（动静分离）


## 正向代理

